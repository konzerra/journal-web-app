<link
  rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css"
  xmlns="http://www.w3.org/1999/html"/>

<body>
<div class="wrapper container pt-5">
  <h2 class="mt-5">{{'article_publish' | translate}}</h2>
  <div class = "col-lg-6 col-md-offset-1 mb-5">
    <form class="needs-validation" >

      <!-- Journal select -->
      <div class="form-group">
        <label class = "mt-2">{{'journal' | translate}}</label>
        <select class="form-control"
                id="status"
                [formControl]="formGroup.journalId"
                required
        >
          <option value="" disabled selected hidden>{{'select_journal' | translate}}</option>
          <option *ngFor="let journal of journalList"
                  [value]="journal.id">{{journal.name+" "+journal.version}}
          </option>
        </select>
        <div *ngIf="checkFormControl(formGroup.journalId)"
             class="alert-danger">

          <div *ngIf="formGroup.journalId.errors?.['required']">
            {{'select_journal' | translate}}
          </div>

        </div>
      </div>

      <!-- Preferred category input -->
      <div class="form-group">
        <label class="control-label mt-2" for="preferredCategory"> {{"preferred_category" | translate}} </label>
        <textarea type="text"
                  id="preferredCategory"
                  class="form-control"
                  [formControl]="formGroup.preferredCategory"
                  placeholder="{{'enter_preferred_category' | translate}}"
                  required autofocus="autofocus"
                  rows="2"></textarea>
        <div *ngIf="checkFormControl(formGroup.preferredCategory)"
             class="alert-danger">
          <div *ngIf="formGroup.preferredCategory.errors?.['required']">
            {{'enter_preferred_category' | translate}}
          </div>
        </div>
      </div>

      <!-- Total pages -->
      <div class="form-group">
        <label class="control-label mt-2" for="preferredCategory"> {{"pages_count" | translate}} </label>
        <input type="number"
               step="1"
               min="1"
                id="pages"
                class="form-control"
                [formControl]="formGroup.pages"
                placeholder="{{'enter_pages_count' | translate}}"
                required autofocus="autofocus">
        <div *ngIf="checkFormControl(formGroup.pages)"
             class="alert-danger">
          <div *ngIf="formGroup.pages.errors?.['required']">
            {{'enter_pages_count' | translate}}
          </div>
        </div>
      </div>

      <!--  file select -->
      <label class = "mt-2">{{'select_article_word_file' | translate}}</label>
      <br>
      <input
        class = "form-control"
        type="file"
        id="wordFile"
        accept=".doc, .docx"
        (change)="onFileChange($event)"
      />

      <!-- Select input language   radio-buttons -->
      <label class = "mt-2">{{'enter_data_in_languages' | translate}}</label>
      <br>
      <div class="btn-group" role="group" aria-label="Basic radio toggle button group">
        <div *ngFor="let lang of formGroup.requiredLangs" >
          <input
            [value]="lang"
            type="radio"
            class="btn-check"
            name="btnradio"
            id="btnradio{{lang}}"
            (change)="onLangChange(lang)"
            autocomplete="off"
            [checked]="selectedRadioButton===lang"
          >
          <label class="btn btn-outline-primary" for="btnradio{{lang}}">&emsp;{{lang}}&emsp;</label>
        </div>
      </div>

      <!-- Article name input -->
      <div class="form-group">
        <label class="control-label mt-2" for="name"> {{"title" | translate}} </label>
        <textarea type="text"
                  id="name"
                  class="form-control"
                  [formControl]="formGroup.name"
                  placeholder="{{'enter_article_title' | translate}}"
                  required autofocus="autofocus"
                  rows="3"></textarea>
        <div *ngIf="checkFormControl(formGroup.name)"
             class="alert-danger">
          <div *ngIf="formGroup.name.errors?.['required']">
            {{'enter_article_title' | translate}}
          </div>
        </div>
      </div>

      <!-- Authors input -->
      <label class="mt-2">{{"author(s)" | translate}}</label>
      <div *ngFor="let author of formGroup.authors; let i = index">
        <div class="input-group" >
          <input type="text"
                 id="author{{i+selectedRadioButton}}"
                 class="form-control mt-2"
                 [formControl]="author"
                 placeholder="{{'enter_author' | translate}}"
                 required autofocus="autofocus"
          >
          <button class="btn btn-danger btn-sm ms-2 mt-2" type="button" id="button-delete-author" (click)="onAuthorRemove(i)">
            <i class="bi bi-trash text-light"></i>
          </button>

        </div>
        <div *ngIf="checkFormControl(formGroup.name)"
             class="alert-danger">
          <div *ngIf="author.errors?.['required']">
            {{'enter_author' | translate}}
          </div>
        </div>
      </div>
      <button class="btn btn-primary btn-sm mt-2" type="button" id="button-add-author" (click)="addAuthor()">
        {{'add_author' | translate}}
      </button>

      <!-- Article annotation input -->
      <div class="form-group">
        <label class="control-label mt-2" for="name"> {{'annotation_min_max' | translate}} </label>
        <textarea type="text"
                  id="annotation"
                  class="form-control"
                  [formControl]="formGroup.annotation"
                  placeholder="{{'enter_annotation' | translate}}"
                  required autofocus="autofocus"
                  rows="6"></textarea>
        <div *ngIf="checkFormControl(formGroup.annotation)"
             class="alert-danger">
          <div *ngIf="formGroup.annotation.errors?.['not_enough_words']">
            {{'must_be_200_words' | translate}}
          </div>
        </div>
      </div>

      <!-- Article tags input -->
      <div class="form-group">
        <label class="control-label mt-2" for="name"> {{'tags_min' | translate}} </label>
        <textarea type="text"
                  id="tags"
                  class="form-control"
                  [formControl]="formGroup.tags"
                  placeholder="{{'enter_tags' | translate}}"
                  required autofocus="autofocus"
                  rows="2"></textarea>
        <div *ngIf="checkFormControl(formGroup.tags)"
             class="alert-danger">
          <div *ngIf="formGroup.annotation.errors?.['not_enough_words']">
            {{'must_be_10_words' | translate}}
          </div>
        </div>
      </div>

      <div class="form-group">
        <div class="mt-4">
          <button type="button" name="login-submit" id="login-submit"
                  [disabled]="publishDisabled"
                  class="form-control btn btn-primary btn-sm w-100" (click)="onSubmit()" > {{'send_to_editor' | translate}} </button>
        </div>
      </div>
    </form>

    <div class="form-group mb-5 mt-2">
      <span>{{'any_questions' | translate}} <a routerLink="/user/handbook">{{'handbook' | translate}}</a></span>
    </div>
  </div>
  <br>

</div>
</body>

